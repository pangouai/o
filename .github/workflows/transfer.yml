      - name: OneDrive to OneDrive (with TG hourly progress)
        env:
          TG_BOT_TOKEN: ${{ secrets.TG_BOT_TOKEN }}
          TG_CHAT_ID: ${{ secrets.TG_CHAT_ID }}
        run: |
          while true; do
            SRC=$(rclone size ndja:/ | grep "Total size" | awk '{print $3" "$4}')
            DST=$(rclone size n2:/ | grep "Total size" | awk '{print $3" "$4}')

            MSG="OneDrive转存进度 | 源盘:${SRC} | 已完成:${DST}"

            curl -s -X POST "https://api.telegram.org/bot${TG_BOT_TOKEN}/sendMessage" \
              -d chat_id="${TG_CHAT_ID}" \
              --data-urlencode text="${MSG}"

            sleep 3600 &
            SLEEP_PID=$!

            rclone copy ndja:/ n2:/ \
              --transfers=2 \
              --checkers=4 \
              --tpslimit=4 \
              --retries 20 \
              --low-level-retries 50 \
              --stats=0

            wait $SLEEP_PID
          done
